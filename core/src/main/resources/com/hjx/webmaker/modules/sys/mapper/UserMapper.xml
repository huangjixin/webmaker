<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hjx.webmaker.modules.sys.mapper.UserMapper">
    <resultMap id="BaseResultMap" type="com.hjx.webmaker.modules.sys.domain.User">
        <id column="ID" jdbcType="VARCHAR" property="id"/>
        <result column="LOGIN_NAME" jdbcType="VARCHAR" property="loginName"/>
        <result column="PASSWORD" jdbcType="VARCHAR" property="password"/>
        <result column="REAL_NAME" jdbcType="VARCHAR" property="realName"/>
        <result column="IS_EXPIRED" jdbcType="TINYINT" property="isExpired"/>
        <result column="IS_LOCKED" jdbcType="TINYINT" property="isLocked"/>
        <result column="IS_ENABLED" jdbcType="TINYINT" property="isEnabled"/>
        <result column="TYPE" jdbcType="INTEGER" property="type"/>
        <result column="STATUS" jdbcType="INTEGER" property="status"/>
        <result column="CREATE_BY" jdbcType="VARCHAR" property="createBy"/>
        <result column="CREATE_TIME" jdbcType="TIMESTAMP" property="createTime"/>
        <result column="UPDATE_BY" jdbcType="VARCHAR" property="updateBy"/>
        <result column="UPDATE_TIME" jdbcType="TIMESTAMP" property="updateTime"/>
        <result column="EN_NAME" jdbcType="VARCHAR" property="enName"/>
        <result column="EMAIL" jdbcType="VARCHAR" property="email"/>
        <result column="SEX" jdbcType="BIT" property="sex"/>
        <result column="MOBILE" jdbcType="VARCHAR" property="mobile"/>
        <result column="SORT" jdbcType="BIGINT" property="sort"/>
    </resultMap>
    <sql id="Example_Where_Clause">
        <where>
            <foreach collection="oredCriteria" item="criteria" separator="or">
                <if test="criteria.valid">
                    <trim prefix="(" prefixOverrides="and" suffix=")">
                        <foreach collection="criteria.criteria" item="criterion">
                            <choose>
                                <when test="criterion.noValue">
                                    and ${criterion.condition}
                                </when>
                                <when test="criterion.singleValue">
                                    and ${criterion.condition} #{criterion.value}
                                </when>
                                <when test="criterion.betweenValue">
                                    and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                                </when>
                                <when test="criterion.listValue">
                                    and ${criterion.condition}
                                    <foreach close=")" collection="criterion.value" item="listItem" open="("
                                             separator=",">
                                        #{listItem}
                                    </foreach>
                                </when>
                            </choose>
                        </foreach>
                    </trim>
                </if>
            </foreach>
        </where>
    </sql>
    <sql id="Update_By_Example_Where_Clause">
        <where>
            <foreach collection="example.oredCriteria" item="criteria" separator="or">
                <if test="criteria.valid">
                    <trim prefix="(" prefixOverrides="and" suffix=")">
                        <foreach collection="criteria.criteria" item="criterion">
                            <choose>
                                <when test="criterion.noValue">
                                    and ${criterion.condition}
                                </when>
                                <when test="criterion.singleValue">
                                    and ${criterion.condition} #{criterion.value}
                                </when>
                                <when test="criterion.betweenValue">
                                    and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                                </when>
                                <when test="criterion.listValue">
                                    and ${criterion.condition}
                                    <foreach close=")" collection="criterion.value" item="listItem" open="("
                                             separator=",">
                                        #{listItem}
                                    </foreach>
                                </when>
                            </choose>
                        </foreach>
                    </trim>
                </if>
            </foreach>
        </where>
    </sql>
    <sql id="Base_Column_List">
        ID, LOGIN_NAME, PASSWORD, REAL_NAME, IS_EXPIRED, IS_LOCKED, IS_ENABLED, TYPE, STATUS,
        CREATE_BY, CREATE_TIME, UPDATE_BY, UPDATE_TIME, EN_NAME, EMAIL, SEX, MOBILE, SORT
    </sql>

  <resultMap id="UserDtoMap" type="com.hjx.webmaker.modules.sys.dto.UserDto" extends="BaseResultMap">
    <collection property="roles"
                ofType="com.hjx.webmaker.modules.sys.domain.Role">
      <id column="ROLE_ID" jdbcType="VARCHAR" property="id" />
      <result column="ROLE_NAME" jdbcType="VARCHAR" property="name" />
      <result column="ROLE_IS_EXPIRED" jdbcType="TINYINT" property="isExpired" />
      <result column="ROLE_IS_LOCKED" jdbcType="TINYINT" property="isLocked" />
      <result column="ROLE_IS_ENABLED" jdbcType="TINYINT" property="isEnabled" />
      <result column="ROLE_TYPE" jdbcType="INTEGER" property="type" />
      <result column="ROLE_STATUS" jdbcType="INTEGER" property="status" />
      <result column="ROLE_CREATE_BY" jdbcType="VARCHAR" property="createBy" />
      <result column="ROLE_CREATE_TIME" jdbcType="TIMESTAMP" property="createTime" />
      <result column="ROLE_UPDATE_BY" jdbcType="VARCHAR" property="updateBy" />
      <result column="ROLE_UPDATE_TIME" jdbcType="TIMESTAMP" property="updateTime" />
      <result column="ROLE_EN_NAME" jdbcType="VARCHAR" property="enName" />
    </collection>
    <collection property="permissions"
                ofType="com.hjx.webmaker.modules.sys.domain.Permission">
      <id column="PERMISSION_ID" jdbcType="VARCHAR" property="id" />
      <result column="PERMISSION_NAME" jdbcType="VARCHAR" property="name" />
      <result column="PERMISSION_IS_EXPIRED" jdbcType="TINYINT" property="isExpired" />
      <result column="PERMISSION_IS_LOCKED" jdbcType="TINYINT" property="isLocked" />
      <result column="PERMISSION_IS_ENABLED" jdbcType="TINYINT" property="isEnabled" />
      <result column="PERMISSION_TYPE" jdbcType="INTEGER" property="type" />
      <result column="PERMISSION_STATUS" jdbcType="INTEGER" property="status" />
      <result column="PERMISSION_CREATE_BY" jdbcType="VARCHAR" property="createBy" />
      <result column="PERMISSION_CREATE_TIME" jdbcType="TIMESTAMP" property="createTime" />
      <result column="PERMISSION_UPDATE_BY" jdbcType="VARCHAR" property="updateBy" />
      <result column="PERMISSION_UPDATE_TIME" jdbcType="TIMESTAMP" property="updateTime" />
      <result column="PERMISSION_EN_NAME" jdbcType="VARCHAR" property="enName" />
      <result column="PERMISSION_PARENT_ID" jdbcType="VARCHAR" property="parentId" />
      <result column="PERMISSION_CODE" jdbcType="VARCHAR" property="code" />
      <result column="PERMISSION_IS_MENU" jdbcType="TINYINT" property="isMenu" />
      <result column="PERMISSION_URL" jdbcType="VARCHAR" property="url" />
    </collection>
  </resultMap>

    <select id="selectByExample" parameterType="com.hjx.webmaker.modules.sys.domain.UserCriteria"
            resultMap="BaseResultMap">
        select
        <if test="distinct">
            distinct
        </if>
        <include refid="Base_Column_List"/>
        from sys_user
        <if test="_parameter != null">
            <include refid="Example_Where_Clause"/>
        </if>
        <if test="orderByClause != null">
            order by ${orderByClause}
        </if>
        <if test="limitStart != null and limitSize >= 0">
            limit #{limitStart} , #{limitSize}
        </if>
    </select>
    <select id="selectByPrimaryKey" parameterType="java.lang.String" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from sys_user
        where ID = #{id,jdbcType=VARCHAR}
    </select>
    <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
        delete from sys_user
        where ID = #{id,jdbcType=VARCHAR}
    </delete>
    <delete id="deleteByExample" parameterType="com.hjx.webmaker.modules.sys.domain.UserCriteria">
        delete from sys_user
        <if test="_parameter != null">
            <include refid="Example_Where_Clause"/>
        </if>
    </delete>
    <insert id="insert" parameterType="com.hjx.webmaker.modules.sys.domain.User">
        insert into sys_user (ID, LOGIN_NAME, PASSWORD,
        REAL_NAME, IS_EXPIRED, IS_LOCKED,
        IS_ENABLED, TYPE, STATUS,
        CREATE_BY, CREATE_TIME, UPDATE_BY,
        UPDATE_TIME, EN_NAME, EMAIL,
        SEX, MOBILE, SORT)
        values (#{id,jdbcType=VARCHAR}, #{loginName,jdbcType=VARCHAR}, #{password,jdbcType=VARCHAR},
        #{realName,jdbcType=VARCHAR}, #{isExpired,jdbcType=TINYINT}, #{isLocked,jdbcType=TINYINT},
        #{isEnabled,jdbcType=TINYINT}, #{type,jdbcType=INTEGER}, #{status,jdbcType=INTEGER},
        #{createBy,jdbcType=VARCHAR}, #{createTime,jdbcType=TIMESTAMP}, #{updateBy,jdbcType=VARCHAR},
        #{updateTime,jdbcType=TIMESTAMP}, #{enName,jdbcType=VARCHAR}, #{email,jdbcType=VARCHAR},
        #{sex,jdbcType=BIT}, #{mobile,jdbcType=VARCHAR}, #{sort,jdbcType=BIGINT})
    </insert>
    <insert id="insertSelective" parameterType="com.hjx.webmaker.modules.sys.domain.User">
        insert into sys_user
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="id != null">
                ID,
            </if>
            <if test="loginName != null">
                LOGIN_NAME,
            </if>
            <if test="password != null">
                PASSWORD,
            </if>
            <if test="realName != null">
                REAL_NAME,
            </if>
            <if test="isExpired != null">
                IS_EXPIRED,
            </if>
            <if test="isLocked != null">
                IS_LOCKED,
            </if>
            <if test="isEnabled != null">
                IS_ENABLED,
            </if>
            <if test="type != null">
                TYPE,
            </if>
            <if test="status != null">
                STATUS,
            </if>
            <if test="createBy != null">
                CREATE_BY,
            </if>
            <if test="createTime != null">
                CREATE_TIME,
            </if>
            <if test="updateBy != null">
                UPDATE_BY,
            </if>
            <if test="updateTime != null">
                UPDATE_TIME,
            </if>
            <if test="enName != null">
                EN_NAME,
            </if>
            <if test="email != null">
                EMAIL,
            </if>
            <if test="sex != null">
                SEX,
            </if>
            <if test="mobile != null">
                MOBILE,
            </if>
            <if test="sort != null">
                SORT,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="id != null">
                #{id,jdbcType=VARCHAR},
            </if>
            <if test="loginName != null">
                #{loginName,jdbcType=VARCHAR},
            </if>
            <if test="password != null">
                #{password,jdbcType=VARCHAR},
            </if>
            <if test="realName != null">
                #{realName,jdbcType=VARCHAR},
            </if>
            <if test="isExpired != null">
                #{isExpired,jdbcType=TINYINT},
            </if>
            <if test="isLocked != null">
                #{isLocked,jdbcType=TINYINT},
            </if>
            <if test="isEnabled != null">
                #{isEnabled,jdbcType=TINYINT},
            </if>
            <if test="type != null">
                #{type,jdbcType=INTEGER},
            </if>
            <if test="status != null">
                #{status,jdbcType=INTEGER},
            </if>
            <if test="createBy != null">
                #{createBy,jdbcType=VARCHAR},
            </if>
            <if test="createTime != null">
                #{createTime,jdbcType=TIMESTAMP},
            </if>
            <if test="updateBy != null">
                #{updateBy,jdbcType=VARCHAR},
            </if>
            <if test="updateTime != null">
                #{updateTime,jdbcType=TIMESTAMP},
            </if>
            <if test="enName != null">
                #{enName,jdbcType=VARCHAR},
            </if>
            <if test="email != null">
                #{email,jdbcType=VARCHAR},
            </if>
            <if test="sex != null">
                #{sex,jdbcType=BIT},
            </if>
            <if test="mobile != null">
                #{mobile,jdbcType=VARCHAR},
            </if>
            <if test="sort != null">
                #{sort,jdbcType=BIGINT},
            </if>
        </trim>
    </insert>
    <select id="countByExample" parameterType="com.hjx.webmaker.modules.sys.domain.UserCriteria"
            resultType="java.lang.Long">
        select count(*) from sys_user
        <if test="_parameter != null">
            <include refid="Example_Where_Clause"/>
        </if>
    </select>
    <update id="updateByExampleSelective" parameterType="map">
        update sys_user
        <set>
            <if test="record.id != null">
                ID = #{record.id,jdbcType=VARCHAR},
            </if>
            <if test="record.loginName != null">
                LOGIN_NAME = #{record.loginName,jdbcType=VARCHAR},
            </if>
            <if test="record.password != null">
                PASSWORD = #{record.password,jdbcType=VARCHAR},
            </if>
            <if test="record.realName != null">
                REAL_NAME = #{record.realName,jdbcType=VARCHAR},
            </if>
            <if test="record.isExpired != null">
                IS_EXPIRED = #{record.isExpired,jdbcType=TINYINT},
            </if>
            <if test="record.isLocked != null">
                IS_LOCKED = #{record.isLocked,jdbcType=TINYINT},
            </if>
            <if test="record.isEnabled != null">
                IS_ENABLED = #{record.isEnabled,jdbcType=TINYINT},
            </if>
            <if test="record.type != null">
                TYPE = #{record.type,jdbcType=INTEGER},
            </if>
            <if test="record.status != null">
                STATUS = #{record.status,jdbcType=INTEGER},
            </if>
            <if test="record.createBy != null">
                CREATE_BY = #{record.createBy,jdbcType=VARCHAR},
            </if>
            <if test="record.createTime != null">
                CREATE_TIME = #{record.createTime,jdbcType=TIMESTAMP},
            </if>
            <if test="record.updateBy != null">
                UPDATE_BY = #{record.updateBy,jdbcType=VARCHAR},
            </if>
            <if test="record.updateTime != null">
                UPDATE_TIME = #{record.updateTime,jdbcType=TIMESTAMP},
            </if>
            <if test="record.enName != null">
                EN_NAME = #{record.enName,jdbcType=VARCHAR},
            </if>
            <if test="record.email != null">
                EMAIL = #{record.email,jdbcType=VARCHAR},
            </if>
            <if test="record.sex != null">
                SEX = #{record.sex,jdbcType=BIT},
            </if>
            <if test="record.mobile != null">
                MOBILE = #{record.mobile,jdbcType=VARCHAR},
            </if>
            <if test="record.sort != null">
                SORT = #{record.sort,jdbcType=BIGINT},
            </if>
        </set>
        <if test="_parameter != null">
            <include refid="Update_By_Example_Where_Clause"/>
        </if>
    </update>
    <update id="updateByExample" parameterType="map">
        update sys_user
        set ID = #{record.id,jdbcType=VARCHAR},
        LOGIN_NAME = #{record.loginName,jdbcType=VARCHAR},
        PASSWORD = #{record.password,jdbcType=VARCHAR},
        REAL_NAME = #{record.realName,jdbcType=VARCHAR},
        IS_EXPIRED = #{record.isExpired,jdbcType=TINYINT},
        IS_LOCKED = #{record.isLocked,jdbcType=TINYINT},
        IS_ENABLED = #{record.isEnabled,jdbcType=TINYINT},
        TYPE = #{record.type,jdbcType=INTEGER},
        STATUS = #{record.status,jdbcType=INTEGER},
        CREATE_BY = #{record.createBy,jdbcType=VARCHAR},
        CREATE_TIME = #{record.createTime,jdbcType=TIMESTAMP},
        UPDATE_BY = #{record.updateBy,jdbcType=VARCHAR},
        UPDATE_TIME = #{record.updateTime,jdbcType=TIMESTAMP},
        EN_NAME = #{record.enName,jdbcType=VARCHAR},
        EMAIL = #{record.email,jdbcType=VARCHAR},
        SEX = #{record.sex,jdbcType=BIT},
        MOBILE = #{record.mobile,jdbcType=VARCHAR},
        SORT = #{record.sort,jdbcType=BIGINT}
        <if test="_parameter != null">
            <include refid="Update_By_Example_Where_Clause"/>
        </if>
    </update>
    <update id="updateByPrimaryKeySelective" parameterType="com.hjx.webmaker.modules.sys.domain.User">
        update sys_user
        <set>
            <if test="loginName != null">
                LOGIN_NAME = #{loginName,jdbcType=VARCHAR},
            </if>
            <if test="password != null">
                PASSWORD = #{password,jdbcType=VARCHAR},
            </if>
            <if test="realName != null">
                REAL_NAME = #{realName,jdbcType=VARCHAR},
            </if>
            <if test="isExpired != null">
                IS_EXPIRED = #{isExpired,jdbcType=TINYINT},
            </if>
            <if test="isLocked != null">
                IS_LOCKED = #{isLocked,jdbcType=TINYINT},
            </if>
            <if test="isEnabled != null">
                IS_ENABLED = #{isEnabled,jdbcType=TINYINT},
            </if>
            <if test="type != null">
                TYPE = #{type,jdbcType=INTEGER},
            </if>
            <if test="status != null">
                STATUS = #{status,jdbcType=INTEGER},
            </if>
            <if test="createBy != null">
                CREATE_BY = #{createBy,jdbcType=VARCHAR},
            </if>
            <if test="createTime != null">
                CREATE_TIME = #{createTime,jdbcType=TIMESTAMP},
            </if>
            <if test="updateBy != null">
                UPDATE_BY = #{updateBy,jdbcType=VARCHAR},
            </if>
            <if test="updateTime != null">
                UPDATE_TIME = #{updateTime,jdbcType=TIMESTAMP},
            </if>
            <if test="enName != null">
                EN_NAME = #{enName,jdbcType=VARCHAR},
            </if>
            <if test="email != null">
                EMAIL = #{email,jdbcType=VARCHAR},
            </if>
            <if test="sex != null">
                SEX = #{sex,jdbcType=BIT},
            </if>
            <if test="mobile != null">
                MOBILE = #{mobile,jdbcType=VARCHAR},
            </if>
            <if test="sort != null">
                SORT = #{sort,jdbcType=BIGINT},
            </if>
        </set>
        where ID = #{id,jdbcType=VARCHAR}
    </update>
    <update id="updateByPrimaryKey" parameterType="com.hjx.webmaker.modules.sys.domain.User">
        update sys_user
        set LOGIN_NAME = #{loginName,jdbcType=VARCHAR},
        PASSWORD = #{password,jdbcType=VARCHAR},
        REAL_NAME = #{realName,jdbcType=VARCHAR},
        IS_EXPIRED = #{isExpired,jdbcType=TINYINT},
        IS_LOCKED = #{isLocked,jdbcType=TINYINT},
        IS_ENABLED = #{isEnabled,jdbcType=TINYINT},
        TYPE = #{type,jdbcType=INTEGER},
        STATUS = #{status,jdbcType=INTEGER},
        CREATE_BY = #{createBy,jdbcType=VARCHAR},
        CREATE_TIME = #{createTime,jdbcType=TIMESTAMP},
        UPDATE_BY = #{updateBy,jdbcType=VARCHAR},
        UPDATE_TIME = #{updateTime,jdbcType=TIMESTAMP},
        EN_NAME = #{enName,jdbcType=VARCHAR},
        EMAIL = #{email,jdbcType=VARCHAR},
        SEX = #{sex,jdbcType=BIT},
        MOBILE = #{mobile,jdbcType=VARCHAR},
        SORT = #{sort,jdbcType=BIGINT}
        where ID = #{id,jdbcType=VARCHAR}
    </update>

  <select id="selectByUserName" parameterType="java.lang.String"  resultMap="UserDtoMap">
    SELECT
    a.*,

    c.ID as ROLE_ID,
    c.NAME as ROLE_NAME,
    c.IS_EXPIRED as ROLE_IS_EXPIRED,
    c.IS_LOCKED as ROLE_IS_LOCKED,
    c.IS_ENABLED as ROLE_IS_ENABLED,
    c.TYPE as ROLE_TYPE,
    c.STATUS as ROLE_STATUS,
    c.CREATE_BY as ROLE_CREATE_BY,
    c.CREATE_TIME as ROLE_CREATE_TIME,
    c.UPDATE_BY as ROLE_UPDATE_BY,
    c.UPDATE_TIME as ROLE_UPDATE_TIME,
    c.EN_NAME as ROLE_EN_NAME,

    e.ID AS PERMISSION_ID,
    e. NAME AS PERMISSION_NAME,
    e.IS_EXPIRED AS PERMISSION_IS_EXPIRED,
    e.IS_LOCKED AS PERMISSION_IS_LOCKED,
    e.IS_ENABLED AS PERMISSION_IS_ENABLED,
    e.TYPE AS PERMISSION_TYPE,
    e.STATUS AS PERMISSION_STATUS,
    e.CREATE_BY AS PERMISSION_CREATE_BY,
    e.CREATE_TIME AS PERMISSION_CREATE_TIME,
    e.UPDATE_BY AS PERMISSION_UPDATE_BY,
    e.UPDATE_TIME AS PERMISSION_UPDATE_TIME,
    e.EN_NAME AS PERMISSION_EN_NAME,
    e.PARENT_ID AS PERMISSION_PARENT_ID,
    e.CODE AS PERMISSION_CODE,
    e.IS_MENU AS PERMISSION_IS_MENU,
    e.URL AS PERMISSION_URL
    FROM
    sys_user AS a
    LEFT JOIN sys_user_role AS b ON a.ID = b.USER_ID
    LEFT JOIN sys_role AS c ON b.ROLE_ID = c.ID
    LEFT JOIN sys_role_permission AS d ON c.ID = d.ROLE_ID
    LEFT JOIN sys_permission AS e ON d.PERMISSION_ID = e.ID
    WHERE
    a.ID = #{loginName}

    union

    SELECT
    a.*,

    c.ID as ROLE_ID,
    c.NAME as ROLE_NAME,
    c.IS_EXPIRED as ROLE_IS_EXPIRED,
    c.IS_LOCKED as ROLE_IS_LOCKED,
    c.IS_ENABLED as ROLE_IS_ENABLED,
    c.TYPE as ROLE_TYPE,
    c.STATUS as ROLE_STATUS,
    c.CREATE_BY as ROLE_CREATE_BY,
    c.CREATE_TIME as ROLE_CREATE_TIME,
    c.UPDATE_BY as ROLE_UPDATE_BY,
    c.UPDATE_TIME as ROLE_UPDATE_TIME,
    c.EN_NAME as ROLE_EN_NAME,

    e.ID AS PERMISSION_ID,
    e. NAME AS PERMISSION_NAME,
    e.IS_EXPIRED AS PERMISSION_IS_EXPIRED,
    e.IS_LOCKED AS PERMISSION_IS_LOCKED,
    e.IS_ENABLED AS PERMISSION_IS_ENABLED,
    e.TYPE AS PERMISSION_TYPE,
    e.STATUS AS PERMISSION_STATUS,
    e.CREATE_BY AS PERMISSION_CREATE_BY,
    e.CREATE_TIME AS PERMISSION_CREATE_TIME,
    e.UPDATE_BY AS PERMISSION_UPDATE_BY,
    e.UPDATE_TIME AS PERMISSION_UPDATE_TIME,
    e.EN_NAME AS PERMISSION_EN_NAME,
    e.PARENT_ID AS PERMISSION_PARENT_ID,
    e.CODE AS PERMISSION_CODE,
    e.IS_MENU AS PERMISSION_IS_MENU,
    e.URL AS PERMISSION_URL
    FROM
    sys_user AS a
    LEFT JOIN sys_user_role AS b ON a.ID = b.USER_ID
    LEFT JOIN sys_role AS c ON b.ROLE_ID = c.ID
    LEFT JOIN sys_role_permission AS d ON c.ID = d.ROLE_ID
    LEFT JOIN sys_permission AS e ON d.PERMISSION_ID = e.ID
    WHERE
    a.LOGIN_NAME = #{loginName}

    union

    SELECT
    a.*,

    c.ID as ROLE_ID,
    c.NAME as ROLE_NAME,
    c.IS_EXPIRED as ROLE_IS_EXPIRED,
    c.IS_LOCKED as ROLE_IS_LOCKED,
    c.IS_ENABLED as ROLE_IS_ENABLED,
    c.TYPE as ROLE_TYPE,
    c.STATUS as ROLE_STATUS,
    c.CREATE_BY as ROLE_CREATE_BY,
    c.CREATE_TIME as ROLE_CREATE_TIME,
    c.UPDATE_BY as ROLE_UPDATE_BY,
    c.UPDATE_TIME as ROLE_UPDATE_TIME,
    c.EN_NAME as ROLE_EN_NAME,

    e.ID AS PERMISSION_ID,
    e. NAME AS PERMISSION_NAME,
    e.IS_EXPIRED AS PERMISSION_IS_EXPIRED,
    e.IS_LOCKED AS PERMISSION_IS_LOCKED,
    e.IS_ENABLED AS PERMISSION_IS_ENABLED,
    e.TYPE AS PERMISSION_TYPE,
    e.STATUS AS PERMISSION_STATUS,
    e.CREATE_BY AS PERMISSION_CREATE_BY,
    e.CREATE_TIME AS PERMISSION_CREATE_TIME,
    e.UPDATE_BY AS PERMISSION_UPDATE_BY,
    e.UPDATE_TIME AS PERMISSION_UPDATE_TIME,
    e.EN_NAME AS PERMISSION_EN_NAME,
    e.PARENT_ID AS PERMISSION_PARENT_ID,
    e.CODE AS PERMISSION_CODE,
    e.IS_MENU AS PERMISSION_IS_MENU,
    e.URL AS PERMISSION_URL
    FROM
    sys_user AS a
    LEFT JOIN sys_user_role AS b ON a.ID = b.USER_ID
    LEFT JOIN sys_role AS c ON b.ROLE_ID = c.ID
    LEFT JOIN sys_role_permission AS d ON c.ID = d.ROLE_ID
    LEFT JOIN sys_permission AS e ON d.PERMISSION_ID = e.ID

    WHERE a.MOBILE = #{loginName}

    union

    SELECT
    a.*,

    c.ID as ROLE_ID,
    c.NAME as ROLE_NAME,
    c.IS_EXPIRED as ROLE_IS_EXPIRED,
    c.IS_LOCKED as ROLE_IS_LOCKED,
    c.IS_ENABLED as ROLE_IS_ENABLED,
    c.TYPE as ROLE_TYPE,
    c.STATUS as ROLE_STATUS,
    c.CREATE_BY as ROLE_CREATE_BY,
    c.CREATE_TIME as ROLE_CREATE_TIME,
    c.UPDATE_BY as ROLE_UPDATE_BY,
    c.UPDATE_TIME as ROLE_UPDATE_TIME,
    c.EN_NAME as ROLE_EN_NAME,

    e.ID AS PERMISSION_ID,
    e.NAME AS PERMISSION_NAME,
    e.IS_EXPIRED AS PERMISSION_IS_EXPIRED,
    e.IS_LOCKED AS PERMISSION_IS_LOCKED,
    e.IS_ENABLED AS PERMISSION_IS_ENABLED,
    e.TYPE AS PERMISSION_TYPE,
    e.STATUS AS PERMISSION_STATUS,
    e.CREATE_BY AS PERMISSION_CREATE_BY,
    e.CREATE_TIME AS PERMISSION_CREATE_TIME,
    e.UPDATE_BY AS PERMISSION_UPDATE_BY,
    e.UPDATE_TIME AS PERMISSION_UPDATE_TIME,
    e.EN_NAME AS PERMISSION_EN_NAME,
    e.PARENT_ID AS PERMISSION_PARENT_ID,
    e.CODE AS PERMISSION_CODE,
    e.IS_MENU AS PERMISSION_IS_MENU,
    e.URL AS PERMISSION_URL
    FROM
    sys_user AS a
    LEFT JOIN sys_user_role AS b ON a.ID = b.USER_ID
    LEFT JOIN sys_role AS c ON b.ROLE_ID = c.ID
    LEFT JOIN sys_role_permission AS d ON c.ID = d.ROLE_ID
    LEFT JOIN sys_permission AS e ON d.PERMISSION_ID = e.ID
    WHERE a.ID = #{loginName}

    order by PERMISSION_ID asc
  </select>
</mapper>