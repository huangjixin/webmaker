<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">

<body th:fragment="form_channel">
<link rel="stylesheet" th:href="@{/js/bootstrapValidator.min.css}">
<link rel="stylesheet" th:href="@{/js/bootstrap-treeview.min.css}">
<!--<link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap-table/1.15.4/bootstrap-table.min.css">-->
<script th:src="@{/js/bootstrapValidator.min.js}"></script>
<script th:src="@{/js/bootstrapValidator_zh_CN.min.js}"></script>
<script th:src="@{/js/bootstrap-treeview.min.js}"></script>
<!--<link href="https://cdn.bootcss.com/jquery.bootstrapvalidator/0.5.3/css/bootstrapValidator.min.css" rel="stylesheet">
<script src="https://cdn.bootcss.com/jquery.bootstrapvalidator/0.5.3/js/bootstrapValidator.min.js"></script>-->
<!--<script src="https://cdn.bootcss.com/jquery.bootstrapvalidator/0.5.3/js/language/zh_CN.min.js"></script>-->

<div class="form-group">
    <label class="col-md-2 control-label" for="name">用户名</label>
    <div class="col-md-10">
        <input id="name" name="loginName" class="form-control"
               data-bv-notempty="true"
               data-bv-notempty-message="不能为空"
               placeholder="用户名"
               th:value="${channel.name}"
               required>
        <span th:if="${#fields.hasErrors('channel.name')}" th:errors="${user.name}"></span>
    </div>
</div>
<!--<div class="form-group" id="password-form-group">
    <label class="col-md-2 control-label" for="password">密 码</label>
    <div class="col-md-10">
        <input id="password" type="password" name="password" class="form-control" placeholder="密  码" required
               th:value="${user.password}">
        <span th:if="${#fields.hasErrors('user.loginName')}" th:errors="${user.loginName}"></span>
    </div>
</div>
<div class="form-group" id="password_confirmation-form-group">
    <label class="col-md-2 control-label" for="password_confirmation">确认密码</label>
    <div class="col-md-10">
        <input id="password_confirmation" type="password" name="password_confirmation" class="form-control"
               placeholder="确认密码" required
               th:value="${user.password}"></div>
</div>
<div class="form-group">
    <label class="col-md-2 control-label" for="realName">真实姓名</label>
    <div class="col-md-10">
        <input id="realName" type="text" name="realName" class="form-control" placeholder="真实姓名" required
               th:value="${user.realName}">
        <span th:if="${#fields.hasErrors('user.realName')}" th:errors="${user.realName}"></span>
    </div>
</div>
<div class="form-group">
    <label class="col-md-2 control-label" for="enName">英文名称</label>
    <div class="col-md-10">
        <input id="enName" type="text" name="enName" class="form-control" placeholder="英文名称"
               th:value="${user.enName}">
        <span th:if="${#fields.hasErrors('user.enName')}" th:errors="${user.enName}"></span>
    </div>
</div>
<div class="form-group">
    <label class="col-md-2 control-label" for="mobile">电话</label>
    <div class="col-md-10">
        <input id="mobile" type="text" name="mobile" class="form-control" placeholder="电话"
               th:value="${user.mobile}">
        <span th:if="${#fields.hasErrors('user.mobile')}" th:errors="${user.mobile}"></span>
    </div>
</div>
<div class="form-group">
    <label class="col-md-2 control-label" for="email">邮箱</label>
    <div class="col-md-10">
        <input id="email" type="text" name="email" class="form-control" placeholder="邮箱"
               th:value="${user.email}">
        <span th:if="${#fields.hasErrors('user.email')}" th:errors="${user.email}"></span>
    </div>
</div>
<div class="form-group">
    <label class="col-md-2 control-label" for="roleIds">角色</label>
    <div class="col-md-10">
        <input id="roleIds" type="checkbox" name="roleIds" th:each="role:${roles}"
               th:value="${role.id}"
               th:text="'&nbsp;'+${role.name+'&nbsp;&nbsp;&nbsp;&nbsp;'}"
               th:attr="checked=${user.roleIds.contains(role.id)?true:false}">
    </div>
</div>
<div class="actions form-group">
    <label class="col-md-2 control-label"></label>
    <div th:text="${#request.getAttribute('msg')}"  class="col-md-10" style="color:red;"></div>
</div>-->

<div class="actions form-group">
    <div class="col-md-2"></div>
    <div class="col-md-10 form-inline">
        <button id="submitBtn" type="submit" class="btn btn-success">提交</button>
        <button id="resetBtn" type="reset" class="btn btn-primary">重置</button>
        <a th:href="@{/admin/art/channel}">
            <button type="button" class="btn btn-default">
                <i class="fa fa-arrow-circle-left" aria-hidden="true">&nbsp;返回</i></button>
        </a>
    </div>
</div>

<script th:inline="javascript">
  var root = [[${#servletContext.contextPath}]];

  //验证表单。
  function validateFields(){
    $('#userForm').bootstrapValidator({
          live : 'enabled', //enabled代表当表单控件内容发生变化时就触发验证，默认提交时验证，
          // 默认的提示消息
          message: '该值验证不通过',
          // 表单框里右侧的icon
          feedbackIcons: {　　　　　　　　
                valid: 'glyphicon glyphicon-ok',
            　　invalid: 'glyphicon glyphicon-remove',
            　　validating: 'glyphicon glyphicon-refresh'
          },
          fields: {
            loginName: {
              message: '用户名验证失败',
              validators: {
                notEmpty: {
                  message: '用户名不能为空'
                },
                stringLength: { //长度限制
                  min: 5,
                  max: 18,
                  message: '用户名长度必须在6到18位之间'
                },
                regexp: { //正则表达式
                  regexp: /^[a-zA-Z0-9_]+$/,
                  message: '用户名只能包含大写、小写、数字和下划线'
                }
              }
            },
            mobile: {
               validators: {
                    notEmpty: {
                      message: '电话不能为空'
                    },
                   regexp:{
                        regexp: /^1[3-9][\d]{9}$/,  //正则规则用两个/包裹起来
                        message: '请输入正确的手机号'
                   }
                }
            },
            password:{
                validators: {
                    notEmpty: {
                      message: '密码不能为空'
                    },
                    stringLength: {/*长度提示*/
                       min: 6,
                       max: 30,
                        message: '长度必须在6到30之间'
                    }
                }
            },
            password_confirmation:{
                validators: {
                    notEmpty: {
                      message: '确认密码不能为空'
                    },
                    identical: { //比较是否相同
                        field: 'password',
                        //需要进行比较的input name值
                        message: '两次密码不一致'
                    }
                }
            },
            email: {
              validators: {
                notEmpty: {
                  message: '邮箱地址不能为空'
                },
                emailAddress: {
                  message: '邮箱地址格式有误'
                }
              }
            }
          }
        })
  }

  $(function() {
    validateFields();
  });

</script>
</body>